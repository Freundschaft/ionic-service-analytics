<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">

    <title>Sample UL</title>
    <link href="../ionic/dist/css/ionic.css" rel="stylesheet">
    <script src="../ionic/dist/js/ionic.bundle.js"></script>

    <script src="../ionic-service-common/identity/ionicApp.js"></script>
    <script src="js/ionicAnalytics.js"></script>
  </head>
  <body ng-app="myApp" ng-controller="MyCtrl" ion-track-auto>
    <!-- 
      The nav bar that will be updated as we navigate between views.
    -->
    <ion-nav-bar class="bar-stable nav-title-slide-ios7">
      <ion-nav-back-button class="button-icon icon ion-chevron-left">
        Back
      </ion-nav-back-button>
    </ion-nav-bar>
    <!-- 
      The views will be rendered in the <ion-nav-view> directive below
      Templates are in the /templates folder (but you could also
      have templates inline in this html file if you'd like).
    -->
    <ion-nav-view></ion-nav-view>

    <script type="text/javascript">
    var Keen=Keen||{configure:function(e){this._cf=e},addEvent:function(e,t,n,i){this._eq=this._eq||[],this._eq.push([e,t,n,i])},setGlobalProperties:function(e){this._gp=e},onChartsReady:function(e){this._ocrq=this._ocrq||[],this._ocrq.push(e)}};(function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://":"http://")+"dc8na2hxrj29i.cloudfront.net/code/keen-2.1.0-min.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})();

    // Configure the Keen object with your Project ID and (optional) access keys.
    Keen.configure({
      projectId: "5377805cd97b857fed00003f",
      writeKey: "c751ed888fe2688d67e58462ca3ee4c2fba4a0185da6112bd9689281cee7c03439b9478a1fb5445c3db788f69867fb91f19a98f15715e335eebd4e992078c4e16b657866e6b13b74c11a683c3aa07f3da988ef731379352b06882d831ca64c24c546ceee5ce337127b608db73d1fb8f4", // required for sending events
    });
</script>

    <script id="tabs.html" type="text/ng-template">
    <!-- 
      Create tabs with an icon and label, using the tabs-positive style. 
      Each tab's child <ion-nav-view> directive will have its own 
      navigation history that also transitions its views in and out.
    -->
    <ion-tabs class="tabs-icon-top">


      <!-- Pets Tab -->
      <ion-tab title="Dashboard" icon="icon ion-home" href="#/tab/dash">
        <ion-nav-view name="tab-dash"></ion-nav-view>
      </ion-tab>


      <!-- Adopt Tab -->
      <ion-tab title="Friends" icon="icon ion-heart" href="#/tab/friends">
        <ion-nav-view name="tab-friends"></ion-nav-view>
      </ion-tab>


      <!-- About Tab -->
      <ion-tab title="Account" icon="icon ion-gear-b" href="#/tab/account">
        <ion-nav-view name="tab-account"></ion-nav-view>
      </ion-tab>


    </ion-tabs>
    </script>
    <script id="dash.html" type="text/ng-template">
      <button class="button button-primary">Tap</button>
    </script>
    <script id="friend.html" type="text/ng-template">
      <button class="button button-primary">Tap</button>
    </script>
    <script id="friends.html" type="text/ng-template">
      <button class="button button-primary">Tap</button>
    </script>
    <script id="account.html" type="text/ng-template">
      <button class="button button-primary">Tap</button>
    </script>

    <script>
      angular.module('myApp', ['ionic', 'ionic.services.analytics', 'ionic.services.common'])

      .run(function($ionicPlatform) {
        $ionicPlatform.ready(function() {
          // Hide the accessory bar by default (remove this to show the accessory bar above the keyboard
          // for form inputs)
          if(window.cordova && window.cordova.plugins.Keyboard) {
            cordova.plugins.Keyboard.hideKeyboardAccessoryBar(true);
          }
          if(window.StatusBar) {
            // org.apache.cordova.statusbar required
            StatusBar.styleDefault();
          }
        });
      })

      .config(function($stateProvider, $urlRouterProvider) {

        // Ionic uses AngularUI Router which uses the concept of states
        // Learn more here: https://github.com/angular-ui/ui-router
        // Set up the various states which the app can be in.
        // Each state's controller can be found in controllers.js
        $stateProvider

          // setup an abstract state for the tabs directive
          .state('tab', {
            url: "/tab",
            abstract: true,
            templateUrl: "tabs.html"
          })

          // Each tab has its own nav history stack:

          .state('tab.dash', {
            url: '/dash',
            views: {
              'tab-dash': {
                templateUrl: 'dash.html'
              }
            }
          })

          .state('tab.friends', {
            url: '/friends',
            views: {
              'tab-friends': {
                templateUrl: 'friends.html'
              }
            }
          })
          .state('tab.friend-detail', {
            url: '/friend/:friendId',
            views: {
              'tab-friends': {
                templateUrl: 'friend.html'
              }
            }
          })

          .state('tab.account', {
            url: '/account',
            views: {
              'tab-account': {
                templateUrl: 'account.html'
              }
            }
          })

        // if none of the above states are matched, use this as the fallback
        $urlRouterProvider.otherwise('/tab/dash');

      })

      
      .config(['$ionicAppProvider', function($ionicAppProvider) {
        $ionicAppProvider.identify({
          app_id: 'bea9e753d864'
        });
      }])

      .controller('MyCtrl', function($ionicTrack, $scope) {
        $scope.name = 'Max';
        $ionicTrack.identify({
          user_id: '99',
          name: 'Max Lynch',
          email: 'max@drifty.com'
        });
        $ionicTrack.track('Load').then(function(resp) {
          console.log(resp);
        });
      });
    </script>
  </body>
</html>
